<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	template="../templates/main.xhtml">
	<ui:define name="title">
		Warteraum f√ºr Spiel <h:outputText value="#{waitingRoomBean.game.name}" />
	</ui:define>
	<ui:define name="content">
		<h:form id="WaitForm">
		Players:
			<h:panelGroup id="players">

				<h:dataTable var="p" value="#{waitingRoomBean.players}">
					<h:column>
							#{p.name}
					</h:column>
				</h:dataTable>

			</h:panelGroup>

			<h:commandButton value="Add Bot" action="#{waitingRoomBean.addBot}"
				rendered="#{waitingRoomBean.game.owner == userBean.user}">
				<f:ajax render="WaitForm:players" />
			</h:commandButton>
			<h:commandButton value="Start Game" action="#{waitingRoomBean.start}"
				rendered="#{waitingRoomBean.game.owner == userBean.user}" />
		</h:form>

		<h:form id="HiddenForm" style="display: none;">
			<h:commandButton id="invisibleClickTarget"
				action="#{waitingRoomBean.refresh}">
				<f:ajax render="WaitForm:players" />
			</h:commandButton>
		</h:form>
		
		<h:outputScript>
			<!-- enable polling on this page -->
			//reloadUI(#{Lang.reload_time}, "HiddenForm:", "WaitForm:players");
			formPoll(#{Lang.reload_time}, 'HiddenForm:invisibleClickTarget');
		</h:outputScript>
	</ui:define>
</ui:composition>